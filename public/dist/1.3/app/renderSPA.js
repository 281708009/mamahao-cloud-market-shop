define(function(require,exports,module){module.exports=function(a,n,e){var l={href:window.location.href};M.ajax({loadingDelay:"number"==typeof n.loadingDelay?n.loadingDelay:300,url:a,data:e?{data:JSON.stringify(e)}:{},success:function(a){var e=a.template;n(null,e,l)},error:function(a){if(/^(-1|1001)$/.test(a.error_code)){var e=/micromessenger/gi.test(navigator.userAgent);return e?location.reload():MMH.tips({body:"您还未登录，请登录后再试！",callback:function(){location.href="/login?origin="+location.href}})}var t=a.statusText||a.msg||a.status+" error",r=['<div class="u-null-all"><div class="u-null"><dl><dt class="n-01"></dt>'];r.push("<dd><p>"+t+"</p>"),r.push('<a class="u-btn checked" href="javascript:M.reload();">刷新试试</a>'),r.push("</dd></dl></div></div>"),n(null,r.join(""),l)}})}});