define(function(require,exports,module){function a(a){this.params=a}module.exports=a,a.prototype.render=function(){var a=this;require("AMap"),a.bind()},a.prototype.bind=function(){var a=this,e=a.params,t=$("#app"),n=$("#result"),i=$("#keywords");i.on("input",function(){var a=$.trim($(this).val());return!!a&&void AMap.service(["AMap.PlaceSearch"],function(){var t=new AMap.PlaceSearch({pageSize:20,pageIndex:1,city:e.areaId});a&&e.province&&(e.province=decodeURIComponent(e.province),a=e.province+a),t.search(a,function(a,e){if(n.empty(),"complete"==a){var t=0,i=e.poiList.pois||[];for(t;t<i.length;t++){var o=$("<li><dl><dt>"+i[t].name+"</dt><dd>"+i[t].address+"</dd></dl></li>").data({gps:i[t].name,lng:i[t].location.lng,lat:i[t].location.lat,address:i[t].address});n.append(o)}}})})}),n.on("click","li",function(){var a=$(this),e=(t.data("data")||{},a.data());AMap.service("AMap.Geocoder",function(){var a=new AMap.Geocoder,n=[e.lng,e.lat];a.getAddress(n,function(a,n){if("complete"===a&&"OK"===n.info){var i=n.regeocode,o=i.addressComponent;console.log(o),o.province=o.province.replace(/ÁúÅ$/,"");var r=t.data("data")||{};r.gpsAddr=e.gps,r.district=[o.province,o.city,o.district].join(""),r.areaId=o.adcode,r.prv=o.province,r.city=o.city,r.area=o.district,r.lat=e.lat,r.lng=e.lng,t.data("data",r),window.history.go(-1)}})})}),$(".u-alert del").on("click",function(){$(".u-alert").slideUp()})}});