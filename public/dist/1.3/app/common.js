define(function(e,t,n){!function(){$.throttle=function(e,t){var n=null;return function(){var a=this,i=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(a,i)},"number"!=typeof t?t:200)}},$.fn.transitionEnd=function(e,t){function n(r){if(r.target===this&&(e.call(this,r),t))for(a=0;a<i.length;a++)o.off(i[a],n)}var a,i=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],o=this;if(e)for(a=0;a<i.length;a++)o.on(i[a],n);return this},$.fn.longPress=function(e,t){var n;this.each(function(a,i){var o=$(i);o.off("touchstart").on("touchstart",function(a){n=setTimeout(function(){a.preventDefault(),a.stopPropagation(),e&&e.call(e,o)},t||800)}),o.off("touchend touchmove").on("touchend touchmove",function(){clearTimeout(n)})})},$.fn.touchwipe=function(e){var t={min_move_x:10,min_move_y:10,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return e&&$.extend(t,e),this.each(function(){function e(){this.removeEventListener("touchmove",n),i=null,r=!1}function n(n){var a=n;if(a.touches&&1==a.touches.length&&(a=n.touches[0]),t.preventDefaultEvents&&n.preventDefault(),r){var s=a.pageX,l=a.pageY,d=i-s,u=o-l;Math.abs(d)>=t.min_move_x?(e(),d>0?t.wipeLeft(c):t.wipeRight(c)):Math.abs(u)>=t.min_move_y&&(e(),u>0?t.wipeDown(c):t.wipeUp(c))}}function a(e){var t=e;t.touches&&1==t.touches.length&&(t=e.touches[0]),i=t.pageX,o=t.pageY,r=!0,this.addEventListener("touchmove",n,!1)}var i,o,r=!1,c=$(this);this.addEventListener("touchstart",a,!1)}),this}}(),function(){Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},Array.prototype.unique=function(){for(var e=[],t={},n=this.length,a=0;a<n;a++){var i=this[a];"[object Object]"==Object.prototype.toString.call(this[a])&&(i=JSON.stringify(this[a])),t[i]||(e.push(this[a]),t[i]=1)}return e},Array.prototype.getIndex=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]==e)return t;return-1},Array.prototype.remove=function(e){var t=this.getIndex(e);return t!==-1?this.splice(t,1):null},Array.prototype.replaceArr=function(e,t){var n=this.getIndex(e);return n!==-1?this.splice(n,1,t):null}}(),function(){var t={tools:{isMamahao:/mamahao|mamhao/gi.test(navigator.userAgent),isWeixin:/micromessenger/gi.test(navigator.userAgent),isAlipay:/alipaydefined|aliapp|alipayclient/gi.test(navigator.userAgent),isAndroid:/android|huawei/gi.test(navigator.userAgent),isiPhone:/iphone|ipod|ipad/gi.test(navigator.userAgent),isMobile:function(e){return!!/^1{1,}[3,4,5,7,8]{1}\d{9}$/.test(e)},search:function(e){var t=location.search.match(new RegExp("[?&]"+e+"=([^&]*)(&?)","i"));return t?decodeURIComponent(t[1]):""},Typeof:function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}},config:{isShare:!1,isAjax:{},api:/mamahao.com/gi.test(location.host)?"http://api.mamahao.com/":"http://api.mamhao.com/mamahao-app-api/",isWeixin:/micromessenger/gi.test(navigator.userAgent)},init:function(){$(function(){FastClick.attach(document.body),t.toTop.init(),e.async("app/location",function(e){e.getLocation()})}),e.async("weixin",function(e){t.wx.init(e,{ready:function(){M.config.isShare||t.wx.share(e)}})})},showLoading:function(){var e=$(".loading");e[0]||(e=$('<div class="loading"><span><s></s></span></div>').appendTo(document.body)),e.stop().fadeIn()},hideLoading:function(){var e=$(".loading");e[0]&&e.stop().fadeOut()},ajax:function(n){function a(){var t=$.Deferred();return e.async("app/location",function(e){e.getLocation({success:function(e){t.resolve({location:$.param(e)})},fail:function(){t.reject()}})}),t.promise()}function i(e){var a={type:n.type||"POST",url:n.url||"/",headers:$.extend({ajax:!0},e||{}),data:n.data||{},timeout:2e4,success:function(e){if(console.log("ajax-success-typeof",typeof e),o.isAjax[n.url]=!1,e.error_code){var a=e.msg;return n.error?n.error.call(this,e):/^(-1|1001)$/.test(e.error_code)?o.isWeixin?location.reload():t.tips({body:"您还未登录，请登录后再试！",callback:function(){location.href="/login?origin="+location.href}}):t.tips(a)}n.success&&n.success.call(this,e)},error:function(e){if(console.log("error--->",e),o.isAjax[n.url]=!1,n.error)n.error.call(this,e);else{var a=e.msg||e.statusText;"error"!=a&&t.tips(a)}},complete:function(e){t.hideLoading(),n.complete&&n.complete.call(this,e)}};null!==n.dataType&&(a.dataType=n.dataType),null!==n.cache&&(a.cache=n.cache),null!==n.processData&&(a.processData=n.processData),null!==n.contentType&&(a.contentType=n.contentType),$.ajax(a)}var o=t.config;if(o.showLoading="boolean"!=typeof n.showLoading||n.showLoading,o.loadingDelay="number"==typeof n.loadingDelay?n.loadingDelay:10,o.isAjax[n.url])return!1;o.isAjax[n.url]=!0;var r=setTimeout(function(){clearTimeout(r),o.isAjax[n.url]&&o.showLoading&&t.showLoading()},o.loadingDelay);n.location?$.when(a()).always(i):i()},tips:function(e){var t={elements:{},init:function(){var n=t.elements,a=['<div class="ui-mask ui-mask-transparent ui-tips-mask"></div>','<div class="ui-tips-wrap">','<div class="ui-tips">','<div class="ui-tips-bd"></div></div></div>'];$(document.body).append(a.join("")),n.mask=$(".ui-tips-mask"),n.wrapper=$(".ui-tips-wrap"),n.inner=$(".ui-tips"),n.bd=$(".ui-tips-bd");var i={delay:1500,callback:null};"[object Object]"!==Object.prototype.toString.call(e)?(i.body=""+e,t.params=i):t.params=$.extend({},i,e||{});var o=t.params;o.body&&n.bd.html(o.body),o.class&&n.inner.addClass(o.class),t.show();var r=setTimeout(function(){clearTimeout(r),t.hide()},o.delay)},show:function(){var e=t.elements;e.mask.add(e.inner).addClass("visible")},hide:function(){var e=t.elements,n=t.params;e.mask.removeClass("visible").transitionEnd(function(){e.mask.remove()},!0),e.inner.removeClass("visible").transitionEnd(function(){e.wrapper.remove()},!0),n.callback&&n.callback.call(this)}};t.init()},dialog:function(e){var t={elements:{},init:function(){var n=t.elements,a=['<div class="ui-mask ui-dialog-mask"></div>','<div class="ui-dialog-wrap">','<div class="ui-dialog-inner">','<div class="ui-dialog-hd"></div>','<div class="ui-dialog-bd"></div>','<div class="ui-dialog-ft"></div>',"</div></div>"];n.dialog=$(a.join("")).appendTo($(".spa")[0]?$(".spa"):document.body),n.mask=$(".ui-dialog-mask"),n.wrapper=$(".ui-dialog-wrap"),n.inner=$(".ui-dialog-inner"),n.hd=$(".ui-dialog-hd"),n.bd=$(".ui-dialog-bd"),n.ft=$(".ui-dialog-ft");var i={body:"模态框内容",buttons:[{text:"取消",class:"",onClick:null},{text:"确定",class:"success",onClick:null}]};"[object Object]"!==Object.prototype.toString.call(e)&&(e={body:e+""});var o=t.params=$.extend({},i,e||{});n.bd.html(o.body),o.className&&n.wrapper.addClass(o.className),o.title&&n.hd.addClass("in").html(o.title),n.ft.empty().append(function(){return $.map(o.buttons,function(e,t){var n=["u-btn",e.class].join(" ");return['<button class="'+n+'">'+e.text+"</button>"]}).join("")}),o.isMask&&n.mask.off("click").on("click",function(){t.hide()}),t.show()},show:function(){var e=t.elements,n=t.params;e.mask.add(e.inner).show().addClass("visible"),e.ft.on("click",".u-btn",function(e){var a=$(this).index(),i=n.buttons[a].onClick;i&&$.isFunction(i)?i.call(t,t):t.hide()})},hide:function(){var e=t.elements;e.mask.removeClass("visible").transitionEnd(function(){e.mask.remove()},!0),e.inner.removeClass("visible").transitionEnd(function(){e.wrapper.remove()},!0),e.ft.find(".u-btn").off("click")}};t.init()},dropLoad:function(e){var t=$(".dropload");t[0]&&t.pullToRefresh().on("pull-to-refresh",function(){e.callback?e.callback.call(this,t):function(){var e=setTimeout(function(){clearTimeout(e),t.pullToRefreshDone()},500)}()})},calc:function(){function e(e){e=+e;var t={num:e,times:1};if(e!==(0|e)){var n=(""+e).split("."),a=n[1].length;t.times=Math.pow(10,a),t.num=Math.round(e*t.times)}return t}function t(t,n,a){var i,o=e(t),r=e(n),c=o.num,s=o.times,l=r.num,d=r.times,u=Math.max(s,d);switch(a){case"add":i=s>d?c+l*(s/d):l+c*(d/s),i/=u;break;case"subtract":i=s>d?c-l*(s/d):c*(d/s)-l,i/=u;break;case"multiply":return i=c*l/(s*d);case"divide":return i=c/l*(d/s)}return i}function n(e,n){return t(e,n,"add")}function a(e,n){return t(e,n,"subtract")}function i(e,n){return t(e,n,"multiply")}function o(e,n){return t(e,n,"divide")}return{add:n,subtract:a,multiply:i,divide:o}}(),toTop:{tools:{isWebkit:/webkit/gi.test(navigator.userAgent)},init:function(){var e=this,t=$("meta[name=toTop]");if(t[0]){var n=$(t.attr("content")||window),a=60,i=$("<div class='btn-to-top'></div>").appendTo(document.body);n.scrollTop()<=a&&i.fadeOut(),$(window).on("resize",$.throttle(function(){n.scrollTop()>a?i.fadeIn():i.fadeOut()})),n.on("scroll touchmove",$.throttle(function(){n.scrollTop()>a?i.fadeIn():i.fadeOut()})),i.on("click.top",function(t){t.stopPropagation();var a=n||(e.tools.isWebkit?$("body"):$("html"));a.animate({scrollTop:0},400)})}}},nav:{elements:{},config:{placeholderHeader:".placeholder-hd",autoScroll:".auto-scroll",autoFix:".auto-fix",fixTopClass:"affix affix-top"},init:function(e){var t=this,n=t.config,a=t.elements;if(n.options=e||{},a.body=$("body"),a.nav=$(n.autoScroll),a.autoFixNav=$(n.autoFix),a.placeholder_hd=$(n.placeholderHeader),a.nav[0]&&(n.navTop=a.nav.offset().top,n.navHeight=a.nav.outerHeight(!0),a.nav.on("click","ul li",function(){var e=$(this),n=a.nav.find("ul li").index(this);e.addClass("active").siblings("li").removeClass("active"),t.setNavCenter(n)})),a.autoFixNav[0]){var i=$(n.options.scrollArea)||a.body;a.placeholder_hd[0]||(a.placeholder_hd=$('<div class="placeholder-hd"></div>').prependTo(i)),a.placeholder_hd.css({height:n.navHeight,display:"none"}),i.on("scroll touchmove",function(){t.fixNav()})}},fixNav:function(){var e=this,t=e.config,n=e.elements,a=$(t.options.scrollArea)||n.body;if(n.nav[0]){var i=n.nav,o=n.placeholder_hd,r=a.scrollTop();r>t.navTop?(o.show(),i.addClass(t.fixTopClass)):(o.hide(),i.removeClass(t.fixTopClass))}},setNavCenter:function(e){function t(e){var t=0;return $.each(e,function(){t+=$(this).outerWidth(!0)}),t}var n=this,a=(n.config,n.elements),i=a.nav.find("ul li").eq(e),o=(t(a.nav.find("ul li"))-t(a.nav),t(i.prevAll())+t(i)/2-t(a.nav)/2);a.nav.find("ul").stop().animate({scrollLeft:o},200,function(){i.addClass("active").siblings().removeClass("active")})}},swipe:{elements:{},config:{tab:".ui-swipe-tab",swipe:".ui-swipe",currClass:"current"},init:function(t){var n=this,a=n.config,i=n.elements;i.swipe=$(a.swipe),i.tab=$(a.tab);var o={continuous:!1,callback:function(e,t){var n=$(t).closest(a.swipe).data("tab")||a.tab;$(n).find("ul li").eq(e).addClass("active").siblings().removeClass("active"),$(t).addClass(a.currClass).siblings().removeClass(a.currClass)}},r=$.extend({},o,t||{});e.async("swipe",function(){i.swipe.Swipe(r).data("Swipe")}),i.tab.on("click","ul li",function(){var e=$(this),t=e.index(),n=e.closest(a.tab).data("target")||a.swipe,i=$(n).data("Swipe");i.slide(t)})}},lazyLoad:{init:function(t){var n={container:$(".spa"),threshold:200,effect:"fadeIn",load:function(e,t){$(this).removeAttr("data-"+t.data_attribute)}},a=$.extend({},n,t||{});e.async("lazyload",function(){$("[data-original]").lazyload(a)})}},url:{getParams:function(e){var t={};if(e)for(var n=e.split("&"),a=0,i=n.length;a<i;a++){var o=n[a].split("="),r=n[a].match(new RegExp(o[0]+"=([^&]*)(&?)","i"));t[o[0]]=decodeURIComponent(r[1])}return t},params:function(){var e=this,t=location.search.substring(1);return e.getParams(t)},query:function(e){var t=location.search.match(new RegExp("[?&]"+e+"=([^&]*)(&?)","i"));return t?decodeURIComponent(t[1]):""}},pay:{config:{},order:function(e,t){location.href="/pay/?orderNo="+e+"&dealingType="+(t||1)},weixin:function(e){var n=this,a=e;e.config&&$.extend(e.config,n.config),console.log("M-pay-weixin----->",JSON.stringify(a.data)),t.ajax({url:"/api/wxPay",data:a.data,success:function(e){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:"MD5",paySign:e.paySign},function(e){"get_brand_wcpay_request:ok"==e.err_msg&&("string"==typeof a.callback?location.href=a.callback:a.callback&&a.callback.call(this))})},!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",function(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:"MD5",paySign:e.paySign},function(e){"get_brand_wcpay_request:ok"==e.err_msg&&("string"==typeof a.callback?location.href=a.callback:a.callback&&a.callback.call(this))})}),document.attachEvent("onWeixinJSBridgeReady",function(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:"MD5",paySign:e.paySign},function(e){"get_brand_wcpay_request:ok"==e.err_msg&&("string"==typeof a.callback?location.href=a.callback:a.callback&&a.callback.call(this))})})):WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:"MD5",paySign:e.paySign},function(e){"get_brand_wcpay_request:ok"==e.err_msg&&("string"==typeof a.callback?location.href=a.callback:a.callback&&a.callback.call(this))})}})},alipay:function(n){var a=this,i=n;n.config&&$.extend(n.config,a.config),console.log("M-pay-alipay----->",JSON.stringify(i.data)),t.ajax({url:"/api/aliPay",data:i.data,success:function(t){var n=$(t.data);if(2==i.data.resource){var a="";n.find("input").each(function(){var e=$(this).attr("name"),t=$(this).attr("value");a+=e+"="+encodeURIComponent(t)+"&"});var o=n.attr("action")+a;e.async("3rd/ap.js",function(){_AP.pay(o)})}else n.submit()}})}},wx:{shareData:{title:$("meta[itemprop=name]").attr("content")||"妈妈好商城",url:window.location.origin,image:$("meta[itemprop=image]").attr("content")||"//img.mamhao.cn/s/common/images/icon-114.png",desc:$("meta[itemprop=description]").attr("content")||"好孩子集团旗下母婴电商平台，让每一件商品都是安全的！"},init:function(e,n){n||(n={}),t.ajax({data:{url:window.location.href,r:Math.random()},dataType:"jsonp",url:t.config.api+"pay/weixin/config.htm",success:function(t){console.log(t),e.config({debug:!1,appId:t.appId,timestamp:t.time,nonceStr:t.none,signature:t.sign,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","onVoiceRecordEnd","playVoice","onVoicePlayEnd","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"]}),e.ready(function(){console.info("[wechat config is ready]"),n.ready&&n.ready.call(this)}),e.error(function(e){console.error("[wechat config error]",e.errMsg),n.error&&n.error.call(this,e)})}})},share:function(e,t){var n=this,a=$.extend({},n.shareData,t||{});M.config.isShare=!0,e.ready(function(){var t={title:a.title,link:encodeURI(a.url),imgUrl:encodeURI(a.image),desc:a.desc,success:function(e){a.success&&a.success(e)},cancel:function(){a.cancel&&a.cancel()}},n={title:a.title,link:encodeURI(a.url),imgUrl:encodeURI(a.image),success:function(e){a.success&&a.success(e)},cancel:function(){a.cancel&&a.cancel()}};e.onMenuShareTimeline(n),e.onMenuShareAppMessage(t),e.onMenuShareQQ(t),e.onMenuShareWeibo(t)})}},reload:function(e){if(M.tools.isWeixin&&M.tools.isAndroid){var e=(e||"wechat_time")+"=",t=location.href,n=new RegExp(e+"\\d+"),a=+new Date;if(t.indexOf(e)>-1)t=t.replace(n,e+a);else if(t.indexOf("?")>-1){var i=t.split("?");t=i[1]?i[0]+"?"+e+a+"&"+i[1]:i[0]+"?"+e+a}else t=t.indexOf("#")>-1?t.split("#")[0]+"?"+e+a+location.hash:t+"?"+e+a;history.replaceState(null,document.title,t),location.reload(!0)}else window.location.reload()},Base64:function(){_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",this.encode=function(e){var t,n,a,i,o,r,c,s="",l=0;for("string"!=typeof e&&(e="object"==typeof e?JSON.stringify(e):String(e)),e=_utf8_encode(e);l<e.length;)t=e.charCodeAt(l++),n=e.charCodeAt(l++),a=e.charCodeAt(l++),i=t>>2,o=(3&t)<<4|n>>4,r=(15&n)<<2|a>>6,c=63&a,isNaN(n)?r=c=64:isNaN(a)&&(c=64),s=s+_keyStr.charAt(i)+_keyStr.charAt(o)+_keyStr.charAt(r)+_keyStr.charAt(c);return s},this.decode=function(e){var t,n,a,i,o,r,c,s="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)i=_keyStr.indexOf(e.charAt(l++)),o=_keyStr.indexOf(e.charAt(l++)),r=_keyStr.indexOf(e.charAt(l++)),c=_keyStr.indexOf(e.charAt(l++)),t=i<<2|o>>4,n=(15&o)<<4|r>>2,a=(3&r)<<6|c,s+=String.fromCharCode(t),64!=r&&(s+=String.fromCharCode(n)),64!=c&&(s+=String.fromCharCode(a));return s=_utf8_decode(s)},_utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var a=e.charCodeAt(n);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t},_utf8_decode=function(e){for(var t="",n=0,a=c1=c2=0;n<e.length;)a=e.charCodeAt(n),a<128?(t+=String.fromCharCode(a),n++):a>191&&a<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&a)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&a)<<12|(63&c2)<<6|63&c3),n+=3);return t}},date:{diff:function(e,n,a){var i={D:864e5,H:36e5,M:6e4,S:1e3,T:1},o=a||"D",r=t.tools.Typeof(e),c=t.tools.Typeof(n),s="date"===r?e:"number"===r?new Date(e):new Date(e.replace(/\-/g,"/")),l="date"===c?n:"number"===c?new Date(n):new Date(n.replace(/\-/g,"/"));return Math.floor((l-s)/i[o.toUpperCase()])}},im:{config:{tenantId:"20225",appKey:"mamahao#mamahao",to:"chat",domain:"//kefu.easemob.com",path:"//"+location.host+"/im",staticPath:"//"+location.host+"/im/static",extMsg:{type:"custom",msgtype:{}}},init:function(){var t=this;e.async("/im/easemob.js",function(e){t.easemobim=e||{},$.extend(t.easemobim.config,t.config)})},bind:function(){var e=this;e.easemobim.config.extMsg={},e.easemobim.bind()},track:function(e,t){var n=this;n.easemobim.config.extMsg.msgtype={track:$.extend({title:"我正在看：",price:"商品价格",desc:"商品描述",img_url:"//img.mamhao.cn/s/common/images/icon-114.png",item_url:"http://m.mamahao.com/"},e)},t&&(n.easemobim.config.visitor=t),n.easemobim.bind()},order:function(e,t){var n=this;n.easemobim.config.extMsg.msgtype={order:$.extend({title:"我的订单",order_title:"订单号",price:"商品价格",desc:"商品描述",img_url:"//img.mamhao.cn/s/common/images/icon-114.png",item_url:"http://m.mamahao.com/"},e)},t&&(n.easemobim.config.visitor=t),n.easemobim.bind()}}};t.init(),window.alert=function(e){t.tips(e)},window.confirm=function(e,n){var a={body:""+e,buttons:[{text:"取消",class:"",onClick:null},{text:"确定",class:"success",onClick:n}]};t.dialog(a)},window.M=t}(),function(e){"use strict";e.page={defaults:{keys:{page:"page",count:"pageSize",index:"index"},scrollBox:null,flex:40,api:null,container:".pagination",current:".current",fnLoading:null,fnSuccess:null,fnFailed:null},init:function(t){var n=this,a=n.opts=e.extend(!0,{},n.defaults,t||{});e(a.container).addClass("pagination");var i=e(a.scrollBox?a.scrollBox:a.container);i.on("scroll touchmove",function(){n.scroll(e(this))}),n.run()},run:function(){var e=this,t=(e.opts,e.$ele=e.currContainer());if(!t[0]||t.data("locked"))return!1;if(!t.children()[0]){var n=t.data("params");return e.ajax(n),!1}},scroll:function(e){var t=this,n=t.opts,a=t.$ele=t.currContainer();if(!a[0]||a.data("locked"))return!1;var i=e.scrollTop(),o=e[0].scrollHeight-(e.height()+i);if(o<n.flex){var r=a.data("params")||{};r[n.keys.page]=(a.data("page")||1)+1,t.ajax(r)}},currContainer:function(){var t=this,n=t.opts;return e(n.current).find(".pagination")[0]?e(n.current).find(".pagination"):e(n.container+":visible:eq(0)")},ajax:function(t){var n=this,a=n.opts;n.$ele.data("locked",!0);var i={ajax:!0};i[a.keys.page]=1,i[a.keys.count]=t.count||20,i[a.keys.index]=n.$ele.children().length;var o=e.extend(!0,i,t||{},n.opts.params||{});console.log("ajax_info--->",o),a.fnLoading?a.fnLoading.call(this,n.$ele):n.$ele.append('<div class="tc pagination-loading">正在加载中...</div>'),M.ajax({showLoading:!1,location:!0,url:o.url||a.api,data:{data:JSON.stringify(o)},success:function(e){var t={params:o,data:e};n.$ele.data("page",o[a.keys.page]),n.$ele.data("locked",!1),a.fnSuccess&&a.fnSuccess.call(this,t,n.$ele)},error:function(e){var t={params:o,data:e};if(n.$ele.data("locked",!0),a.fnFailed)a.fnFailed.call(this,t,n.$ele);else{var i=e.msg||e.statusText;M.tips(i)}},complete:function(){e(".pagination-loading").remove()}})}},e.pagination=function(t){e.page.init(t)}}(window.jQuery),function(e){e.fn.spinner=function(t){return this.each(function(){function n(){!r.text()&&r.text(o.value);var e=+r.text(),t=r.data("max"),n=r.data("min")||o.min;n&&e<=n?(c.addClass(o.disabled),e=n):c.removeClass(o.disabled),t&&e>=t?(e=t,s.addClass(o.disabled)):s.removeClass(o.disabled),r.text(e),r.siblings(o.decrement+","+o.increment).off().on("click",a)}function a(){var t=e(this),n=t.siblings(o.num);if(t.hasClass(o.disabled))return!1;var a=+n.text(),i=n.data("max"),r=n.data("min")||o.min;t.is(o.decrement)?--a:++a,r&&a<=r?(c.addClass(o.disabled),a=r):c.removeClass(o.disabled),i&&a>=i?(a=i,s.addClass(o.disabled)):s.removeClass(o.disabled),n.text(a)}var i={value:1,min:1,num:".number",decrement:".decrement",increment:".increment",disabled:"disabled"},o=e.extend({},i,t||{}),r=e(this),c=e(this).siblings(o.decrement),s=e(this).siblings(o.increment);n()})}}(window.jQuery),function(e){e.fn.timeCountDown=function(t){var n=e(this),a={endDate:"2088/08/08 08:08:08",startDate:!1,callback:!1,callstart:!1,callproces:!1,second:0,elements:{second:n.find(".second"),minute:n.find(".minute"),hour:n.find(".hour"),day:n.find(".day")},pms:{second:"00",minute:"00",hour:"00",day:"00"},timeout:!1},i=e.extend({},a,t||{});return this.each(function(){var t={zero:function(e){return e<10?"0"+e:""+e},dv:function(){var e=i.second,n=i.pms;return e>0&&(n.day=t.zero(Math.floor(e/86400)),n.hour=t.zero(Math.floor(e/3600)-24*n.day),n.minute=t.zero(Math.floor(e/60)-24*n.day*60-60*n.hour),n.second=t.zero(Math.floor(e)-24*n.day*60*60-60*n.hour*60-60*n.minute)),n},ui:function(){return i.stop?void(i.timeout&&clearInterval(i.timeout)):(e.each(i.elements,function(e,n){n[0]&&n.html(t.dv()[e]||"00")}),i.timeout&&clearInterval(i.timeout),e.isFunction(i.callproces)&&i.callproces.call(i.callproces,i),i.second<=0?void(e.isFunction(i.callback)&&i.callback.call(i.callback,i)):(i.second--,void(i.timeout=setTimeout(t.ui,1e3))))}};if(i.second)t.ui();else{var n=new Date(i.endDate),a=i.startDate?new Date(i.startDate):new Date;i.second=Math.round((n.getTime()-a.getTime())/1e3),e.isFunction(i.callstart)&&i.callstart.call(i.callstart,i),t.ui()}})}}(window.jQuery),function(e){var t=function(t,n){this.config={second:89,endcall:!1,startcall:!1,procescall:!1},"object"==typeof n?e.extend(this.config,n):"number"==typeof n&&(this.config.second=n),this.elems=t};t.prototype={start:function(){var t=this,n=t.config;e.isFunction(n.startcall)&&n.startcall.call(n.startcall,t),t.process(),n.obj=setInterval(function(){return n.second--,n.second<0?t.end():void t.process()},1e3)},process:function(){var t=this,n=t.config;t.elems.html(n.second),e.isFunction(n.procescall)&&n.procescall.call(n.procescall,t)},end:function(){var t=this,n=t.config;clearInterval(n.obj),e.isFunction(n.endcall)&&n.endcall.call(n.endcall,t)}},e.fn.secondCountDown=function(n){return this.each(function(){var a=new t(e(this),n);a.start()})}}(window.jQuery)});