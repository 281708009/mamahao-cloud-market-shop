!function($){"use strict";$.support=function(){return{touch:!!("ontouchstart"in window)}}(),$.events={start:$.support.touch?"touchstart":"mousedown",move:$.support.touch?"touchmove":"mousemove",end:$.support.touch?"touchend":"mouseup",click:$.support.touch?"touchend":"click"};var e=function(e){function t(e,t,a){var n={format:s.format,value:r.displayValue},o={input:u.input,value:r.displayValue};if(s.formatValue&&(o.string=s.formatValue(n)),"close"===t||s.ifClose.call(r,o)){var i=$(e);r.opened=!1,i.addClass("modal-out").removeClass("modal-in"),u.mask&&u.mask.stop().fadeOut(function(){u.mask.remove()});var l=setTimeout(function(){clearTimeout(l),i.remove()},400);a&&a.call(e,u.input,o)}}function a(e,t){var a="all "+(t||0)+"ms linear";e.css({"-webkit-transition":a,transition:a})}function n(e,t,n){var o="translate3d(0,"+(t||0)+"px,0)";e.css({"-webkit-transform":o,transform:o}),a(e,n)}function o(e,t){var a,n,o,i;return"undefined"==typeof t&&(t="x"),o=window.getComputedStyle(e,null),window.WebKitCSSMatrix?(i=new WebKitCSSMatrix("none"===o.webkitTransform?"":o.webkitTransform),n="x"===t?i.m41:i.m42):(i=o.MozTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),a=i.toString().split(","),"x"===t&&(n=16===a.length?parseFloat(a[12]):parseFloat(a[4])),"y"===t&&(n=16===a.length?parseFloat(a[13]):parseFloat(a[5]))),n||0}function i(e){if(e.target!=u.input[0]&&!$(e.target).closest(".picker-modal")[0]){var t=$(".picker-modal.modal-in");t.trigger("close")}}var r=this,l={mask:!1,container:null,cols:[],atOnce:!0,affix:!1,suffix:!0,onOpen:null,ifClose:function(){return!0},onClose:null,onConfirm:null,inputReadOnly:!0,toolbarHtml:null,toolbarTitle:"请选择",toolbarCloseText:"取消",toolbarConfirmText:"确认"},s=$.extend({},l,e);s.toolbarTpl=s.toolbarHtml||['<header class="tool-bar">',s.toolbarCloseText?'<button class="close-picker">'+s.toolbarCloseText+"</button>":"",'<h1 class="title">'+s.toolbarTitle+"</h1>",'<button class="confirm-picker">'+s.toolbarConfirmText+"</button>","</header>"].join(""),r.initialized=!1,r.opened=!1,r.inline=!1,r.displayValue=s.value.concat()||[];var u={body:$(document.body),input:$(s.input)};r.inline=!!u.modal,r.layout=function(){var e=s.value.length,t=['<div class="picker-modal modal-out" style="display:block">',s.toolbarTpl,'<div class="picker-items"><div class="picker-center-highlight"></div>'];return s.cols.length&&($.each(s.cols,function(a,n){return!(e&&a>e-1)&&(t.push('<div class="picker-items-col"><div class="picker-items-col-wrapper">'),$.each(n.values,function(e,a){var o=s.suffix&&n.suffix?a+n.suffix:a;t.push('<div class="picker-item">'+o+"</div>")}),void t.push("</div></div>"))}),t.push("</div></div>")),$(t.join("")).appendTo(s.container||u.body)},r.open=function(){r.opened||(r.initialized=!0,r.inline||(u.modal=$(r.layout()),s.mask&&(u.mask=$('<div class="picker-mask"></div>').appendTo(s.container||u.body)),u.cols=u.modal.find(".picker-items-col"),u.modal.on("close",function(){t(this,"close",function(e,t){!s.atOnce&&s.onClose&&s.onClose.call(e,t)})}),u.modal.on("confirm",function(){!s.atOnce&&s.onConfirm?t(this,"confirm",function(e,t){s.onConfirm.call(e,t)}):u.modal.trigger("close")})),$.each(u.cols,function(){r.initCols(this)}),u.modal.show().addClass("modal-in").removeClass("modal-out")),r.opened=!0,s.onOpen&&s.onOpen()},r.close=function(){r.opened&&u.modal.trigger("close")},r.setValue=function(){s.onChange&&s.onChange(s),s.atOnce&&r.showResult()},r.showResult=function(){var e={value:r.displayValue},t=s.formatValue?s.formatValue(e):e.value.join(" "),a="input"===u.input[0].tagName.toLowerCase()?"val":"text";u.input[a](t)},r.initCols=function(e){function t(e){return!m&&!d&&(e.preventDefault(),d=!0,v="touchstart"===e.type?e.targetTouches?e.targetTouches[0].pageY:e.originalEvent.targetTouches[0].pageY:e.pageY,void(y=k=o(f.wrapper[0],"y")))}function a(e){return!!d&&(e.preventDefault(),d=!0,g="touchmove"===e.type?e.targetTouches?e.targetTouches[0].pageY:e.originalEvent.targetTouches[0].pageY:e.pageY,h=g-v,k=y+h,k>T&&(k=T+C/2),k<b&&(k=b-C/2),n(f.wrapper,k,200),void f.highlightItem(null,k))}function i(e){d=m=!1,k=Math.round(k/C)*C,k>T&&(k=T),k<b&&(k=b),n(f.wrapper,k,200),r.setValue()}var l=r.displayValue.length&&r.displayValue||s.value,c=$(e),p=u.cols.index(c),f=s.cols[p];f.value=l[p]||f.values[0],f.container=c,f.wrapper=f.container.find(".picker-items-col-wrapper"),f.items=f.container.find(".picker-item");var d,m,v,g,h,y,k,w,x,C,b,T;w=f.container[0].offsetHeight,C=f.items[0].offsetHeight,x=C*f.items.length,b=w/2+C/2-x,T=w/2-C/2,f.setColTranslate=function(e){var t=f.activeIndex=$.inArray(e,f.values),a=-t*C+T;n(f.wrapper,a,200),f.highlightItem(t,a)},f.highlightItem=function(e,t){t||(t=o(f.wrapper[0],"y")),e||(e=-Math.round((t-T)/C)),e<0&&(e=0),e>=f.items.length&&(e=f.items.length-1),r.displayValue[p]=f.value=f.values[e],f.activeIndex!=e&&(f.activeIndex=e),f.items.eq(e).addClass("picker-selected").siblings().removeClass("picker-selected")},f.handleEvents=function(e){f.container[e]($.events.start,t),f.container[e]($.events.move,a),f.container[e]($.events.end,i)},f.setColTranslate(f.value),f.handleEvents("on")},s.inputReadOnly&&u.input.attr("readonly",!0),r.inline||(u.input.off().on($.events.click,function(e){if(e.stopPropagation(),$(this).hasClass("disabled"))return!1;if(!r.opened){var t=$(".picker-modal.modal-in");t.trigger("close"),r.open(),$(window).off().on($.events.click,s.affix?null:i)}}),s.appear&&u.input.trigger($.events.click))};$(document).off().on($.events.click,".confirm-picker, .close-picker",function(){var e=$(".picker-modal.modal-in");$(this).is(".close-picker")?e.trigger("close"):e.trigger("confirm")}),$.fn.picker=function(t){var a=arguments;return this.each(function(){if(this){var n=$(this),o=n.data("picker");if(!o){var i="input"===n[0].tagName.toLowerCase()?"val":"text",r=$.extend({input:n,value:n[i]().split(" ")},t||{});o=new e(r),n.data("picker",o)}"string"==typeof t&&o[t].apply(o,Array.prototype.slice.call(a,1))}})}}(window.jQuery||window.Zepto),function($){"use strict";var e={today:new Date,zeroFixed:function(e){return parseInt(e)<10?"0"+parseInt(e):""+e},makeArr:function(t,a){for(var n=[],o=a||0;o<=t;o++)n.push(e.zeroFixed(o));return n},getDaysByYearAndMonth:function(e,t){return new Date(new Date(e,t,1)-1).getDate()},formatDate:function(t,a){for(var n=0;n<t.length;n++)t[n]=e.zeroFixed(t[n]);var o={"y+":t[0]||e.today.getFullYear(),"M+":t[1]||e.today.getMonth()+1,"d+":t[2]||e.today.getDate(),"h+":t[3]||e.today.getHours(),"m+":t[4]||e.today.getMinutes(),"s+":t[5]||e.today.getSeconds()};for(var i in o)new RegExp("("+i+")").test(a)&&(a="y+"===i?a.replace(RegExp.$1,(o[i]+"").substr(4-RegExp.$1.length)):a.replace(RegExp.$1,1==RegExp.$1.length?o[i]:("00"+o[i]).substr((""+o[i]).length)));return a},DateStringToArr:function(t){var a=t&&!isNaN(+new Date(t))?new Date(t):new Date;return $.map([a.getFullYear(),a.getMonth()+1,a.getDate(),a.getHours(),a.getMinutes()],function(t,a){return e.zeroFixed(t)})}},t={format:"yyyy-MM-dd hh:mm",value:[],yearLimit:[1950,2030],level:5,onChange:function(t){var a=e.getDaysByYearAndMonth(t.cols[0].value,t.cols[1].value),n=t.cols[2].value;n>a&&(n=a.toString()),t.cols[2].value=n,t.cols[2].setColTranslate(n)},formatValue:function(a){return e.formatDate(a.value,a.format||t.format)}};t.value=e.DateStringToArr(),t.cols=[{values:e.makeArr(t.yearLimit[1],t.yearLimit[0]),suffix:"年"},{values:e.makeArr(12,1),suffix:"月"},{values:e.makeArr(31,1),suffix:"日"},{values:e.makeArr(23),suffix:"时"},{values:e.makeArr(59),suffix:"分"},{values:e.makeArr(59),suffix:"秒"}],$.fn.datetimePicker=function(a){return this.each(function(){if(this){var n=$(this),o=$.extend({},t,a||{}),i="input"===n[0].tagName.toLowerCase()?"val":"text";if(a&&a.value)n[i](e.formatDate(a.value,o.format));else{var r=n.data("val")||n[i]();r=$.trim(r),r&&(o.value=e.DateStringToArr(r))}o.value=Array.prototype.slice.call(o.value,0,o.level),n.picker(o)}})}}(window.jQuery||window.Zepto);